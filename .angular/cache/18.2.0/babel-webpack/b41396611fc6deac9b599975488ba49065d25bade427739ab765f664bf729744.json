{"ast":null,"code":"import { HttpClientModule, HttpClient } from '@angular/common/http';\nimport { MatTableModule } from '@angular/material/table';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatPaginatorModule, MatPaginator } from '@angular/material/paginator';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { MatIconModule } from '@angular/material/icon';\nimport { CommonModule } from '@angular/common';\nimport { MatDialog, MatDialogModule } from '@angular/material/dialog';\nimport { AddCourseDialogComponent } from './dialog/add-course-dialog.component';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { EditCourseDialogComponent } from './dialog/edit-course-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/table\";\nimport * as i5 from \"@angular/material/input\";\nimport * as i6 from \"@angular/material/form-field\";\nimport * as i7 from \"@angular/material/paginator\";\nimport * as i8 from \"@angular/material/icon\";\nimport * as i9 from \"@angular/material/tooltip\";\nconst _c0 = () => [5, 10, 20];\nfunction AppComponent_th_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"th\", 17);\n  }\n}\nfunction AppComponent_td_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 18)(1, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function AppComponent_td_12_Template_button_click_1_listener() {\n      const course_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.removeCourse(course_r2));\n    });\n    i0.ɵɵelementStart(2, \"mat-icon\");\n    i0.ɵɵtext(3, \"close\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function AppComponent_td_12_Template_button_click_4_listener() {\n      const course_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.editCourse(course_r2));\n    });\n    i0.ɵɵelementStart(5, \"mat-icon\");\n    i0.ɵɵtext(6, \"edit\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction AppComponent_th_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 17);\n    i0.ɵɵtext(1, \" Course Name \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_td_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const course_r4 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", course_r4.courseName, \" \");\n  }\n}\nfunction AppComponent_th_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 17);\n    i0.ɵɵtext(1, \" Location \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_td_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const course_r5 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", course_r5.location, \" \");\n  }\n}\nfunction AppComponent_th_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 17);\n    i0.ɵɵtext(1, \" Start Date \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_td_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const course_r6 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", course_r6.start, \" \");\n  }\n}\nfunction AppComponent_th_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 17);\n    i0.ɵɵtext(1, \" Length (days) \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_td_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const course_r7 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", course_r7.length, \" \");\n  }\n}\nfunction AppComponent_th_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 17);\n    i0.ɵɵtext(1, \" Price \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_td_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"currency\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const course_r8 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, course_r8.price, course_r8.currency), \" \");\n  }\n}\nfunction AppComponent_tr_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 21);\n  }\n}\nfunction AppComponent_tr_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 22);\n  }\n  if (rf & 2) {\n    const row_r9 = ctx.$implicit;\n    i0.ɵɵproperty(\"matTooltip\", row_r9.courseDescription);\n  }\n}\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    http;\n    dialog;\n    displayedColumns = ['actions', 'courseName', 'location', 'start', 'length', 'price'];\n    dataSource = new MatTableDataSource();\n    paginator;\n    constructor(http, dialog) {\n      this.http = http;\n      this.dialog = dialog;\n    }\n    ngOnInit() {\n      this.fetchCourses();\n    }\n    fetchCourses() {\n      this.http.get('http://127.0.0.1:5000/courses').subscribe(data => {\n        const courses = data.map(course => ({\n          _id: course._id,\n          courseName: course.CourseName,\n          university: course.University,\n          location: `${course.City}, ${course.Country}, ${course.University}`,\n          start: new Date(course.StartDate).toLocaleDateString(),\n          end: new Date(course.EndDate).toLocaleDateString(),\n          length: this.calculateCourseLength(course.StartDate, course.EndDate),\n          price: course.Price,\n          currency: course.Currency,\n          courseDescription: course.CourseDescription,\n          city: course.City,\n          country: course.Country\n        }));\n        courses.sort((a, b) => new Date(b.start).getTime() - new Date(a.start).getTime());\n        this.dataSource.data = courses;\n        this.dataSource.paginator = this.paginator;\n      }, error => {\n        console.error('There was an error fetching the courses!', error);\n      });\n    }\n    ngAfterViewInit() {\n      this.dataSource.paginator = this.paginator;\n    }\n    calculateCourseLength(startDate, endDate) {\n      const start = new Date(startDate);\n      const end = new Date(endDate);\n      const diffTime = Math.abs(end.getTime() - start.getTime());\n      return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    }\n    applyFilter(event) {\n      const filterValue = event.target.value.toLowerCase();\n      this.dataSource.filter = filterValue.trim().toLowerCase();\n    }\n    removeCourse(course) {\n      this.http.delete(`http://127.0.0.1:5000/courses/${course._id}`).subscribe(() => {\n        const index = this.dataSource.data.indexOf(course);\n        if (index >= 0) {\n          this.dataSource.data.splice(index, 1);\n          this.dataSource._updateChangeSubscription();\n        }\n      }, error => {\n        console.error('There was an error deleting the course!', error);\n      });\n    }\n    editCourse(course) {\n      const dialogRef = this.dialog.open(EditCourseDialogComponent, {\n        width: '850px',\n        height: '800px',\n        data: course\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        if (result) {\n          this.fetchCourses();\n        }\n        console.log('The dialog was closed');\n      });\n    }\n    addNewCourse() {\n      const dialogRef = this.dialog.open(AddCourseDialogComponent, {\n        width: '850px',\n        height: '800px'\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        if (result) {\n          this.fetchCourses();\n        }\n        console.log('The dialog was closed');\n      });\n    }\n    static ɵfac = function AppComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || AppComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.MatDialog));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AppComponent,\n      selectors: [[\"app-root\"]],\n      viewQuery: function AppComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(MatPaginator, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n        }\n      },\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 31,\n      vars: 6,\n      consts: [[1, \"table-container\"], [1, \"example-form-field\"], [\"matPrefix\", \"\"], [\"matInput\", \"\", \"placeholder\", \"Enter course information\", 3, \"keyup\"], [\"mat-raised-button\", \"\", 1, \"add-course-button\", 3, \"click\"], [\"mat-table\", \"\", 1, \"mat-elevation-z8\", 3, \"dataSource\"], [\"matColumnDef\", \"actions\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"courseName\"], [\"matColumnDef\", \"location\"], [\"matColumnDef\", \"start\"], [\"matColumnDef\", \"length\"], [\"matColumnDef\", \"price\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 3, \"matTooltip\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"showFirstLastButtons\", \"\", 3, \"pageSizeOptions\", \"pageSize\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\"], [\"mat-icon-button\", \"\", 1, \"remove-button\", 3, \"click\"], [\"mat-icon-button\", \"\", 1, \"edit-button\", 3, \"click\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\", 3, \"matTooltip\"]],\n      template: function AppComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"mat-form-field\", 1)(2, \"mat-label\");\n          i0.ɵɵtext(3, \"Search courses\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"mat-icon\", 2);\n          i0.ɵɵtext(5, \"search\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"input\", 3);\n          i0.ɵɵlistener(\"keyup\", function AppComponent_Template_input_keyup_6_listener($event) {\n            return ctx.applyFilter($event);\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(7, \"button\", 4);\n          i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_7_listener() {\n            return ctx.addNewCourse();\n          });\n          i0.ɵɵtext(8, \"Add New Course\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"table\", 5);\n          i0.ɵɵelementContainerStart(10, 6);\n          i0.ɵɵtemplate(11, AppComponent_th_11_Template, 1, 0, \"th\", 7)(12, AppComponent_td_12_Template, 7, 0, \"td\", 8);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵelementContainerStart(13, 9);\n          i0.ɵɵtemplate(14, AppComponent_th_14_Template, 2, 0, \"th\", 7)(15, AppComponent_td_15_Template, 2, 1, \"td\", 8);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵelementContainerStart(16, 10);\n          i0.ɵɵtemplate(17, AppComponent_th_17_Template, 2, 0, \"th\", 7)(18, AppComponent_td_18_Template, 2, 1, \"td\", 8);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵelementContainerStart(19, 11);\n          i0.ɵɵtemplate(20, AppComponent_th_20_Template, 2, 0, \"th\", 7)(21, AppComponent_td_21_Template, 2, 1, \"td\", 8);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵelementContainerStart(22, 12);\n          i0.ɵɵtemplate(23, AppComponent_th_23_Template, 2, 0, \"th\", 7)(24, AppComponent_td_24_Template, 2, 1, \"td\", 8);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵelementContainerStart(25, 13);\n          i0.ɵɵtemplate(26, AppComponent_th_26_Template, 2, 0, \"th\", 7)(27, AppComponent_td_27_Template, 3, 4, \"td\", 8);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵtemplate(28, AppComponent_tr_28_Template, 1, 0, \"tr\", 14)(29, AppComponent_tr_29_Template, 1, 1, \"tr\", 15);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(30, \"mat-paginator\", 16);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(9);\n          i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n          i0.ɵɵadvance(19);\n          i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"pageSizeOptions\", i0.ɵɵpureFunction0(5, _c0))(\"pageSize\", 10);\n        }\n      },\n      dependencies: [CommonModule, i3.CurrencyPipe, MatTableModule, i4.MatTable, i4.MatHeaderCellDef, i4.MatHeaderRowDef, i4.MatColumnDef, i4.MatCellDef, i4.MatRowDef, i4.MatHeaderCell, i4.MatCell, i4.MatHeaderRow, i4.MatRow, MatInputModule, i5.MatInput, i6.MatFormField, i6.MatLabel, i6.MatPrefix, MatPaginatorModule, i7.MatPaginator, MatIconModule, i8.MatIcon, HttpClientModule, MatTooltipModule, i9.MatTooltip, MatDialogModule],\n      styles: [\".example-form-field[_ngcontent-%COMP%]{width:100%;max-width:100%}.mat-form-field[_ngcontent-%COMP%]{display:flex;align-items:center}.mat-icon[_ngcontent-%COMP%]{margin-right:8px}.remove-button[_ngcontent-%COMP%], .edit-button[_ngcontent-%COMP%]{background:none;border:none;padding:0;margin:0;min-width:auto;box-shadow:none}.add-course-button[_ngcontent-%COMP%]{background-color:#000;color:#fff;margin-left:20px;margin-right:20px;margin-bottom:20px;min-width:200px;height:30px}.add-course-button[_ngcontent-%COMP%]:hover{background-color:#333}.example-form-field[_ngcontent-%COMP%]{display:block;width:100%}.table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;margin-bottom:40px}.mat-paginator[_ngcontent-%COMP%]{width:100%}.table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch}\"]\n    });\n  }\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}